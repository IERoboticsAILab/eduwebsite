{% extends 'base.html' %}
{% load static %}
{% load markdown_extras %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/work.css' %}">
{% endblock %}

{% block title %}Work{% endblock %}

{% block content %}
    <div class="chevron-header">
        <h1>Work</h1>
    </div>
    <div class="work-container">
        <div class="accordion-column">
            <div class="accordion">
                {% for item in work_items %}
                <div class="accordion-item">
                    <button class="accordion-button">{{ item.title }} - {{ item.date_range }}</button>
                    <div id="content{{ forloop.counter }}" class="accordion-content" style="display: none;">
                        <h3>{{ item.institution }}</h3>
                        <p>{{ item.description|markdown|safe }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="experience-column">
            <h2>Experience</h2>
            <p>Multidisciplinary experience in several countries, such as Spain, Germany, Belgium, United Kingdom, Japan, and United States.</p>
            <p>Leading teams and managing international projects in different areas: distributed robotics, machine learning, and artificial intelligence.</p>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('click', function (e) {
        if (e.target.classList.contains('accordion-button')) {
            const contents = document.querySelectorAll('.accordion-content');
            contents.forEach(content => {
                if (content !== e.target.nextElementSibling) {
                    content.style.display = 'none';
                }
            });
            const targetContent = e.target.nextElementSibling;
            targetContent.style.display = targetContent.style.display === 'block' ? 'none' : 'block';
        }
    });
</script>
{% endblock %}
