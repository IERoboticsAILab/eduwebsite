<div class="projects-grid">
  {% for project in projects %}
      <div class="project-card">
          {% if project.image %}
              <img src="{{ project.image.url }}" alt="{{ project.title }}" class="project-image">
          {% endif %}
          <div class="project-content">
              <h3>{{ project.title }}</h3>
              <p class="project-date">
                  {{ project.start_date|date:"M Y" }} -
                  {% if project.is_ongoing %}
                      Present
                  {% else %}
                      {{ project.end_date|date:"M Y" }}
                  {% endif %}
              </p>
              <p class="project-tech">{{ project.technologies }}</p>
              <p class="project-description">{{ project.description|truncatewords:30 }}</p>

              <div class="project-links">
                  {% if project.github_link %}
                      <a href="{{ project.github_link }}" target="_blank" class="project-link">GitHub</a>
                  {% endif %}
                  {% if project.live_link %}
                      <a href="{{ project.live_link }}" target="_blank" class="project-link">Live Demo</a>
                  {% endif %}
              </div>

              {% if project.publications.exists %}
                  <div class="project-publications">
                      <h4>Related Publications</h4>
                      <ul>
                          {% for pub in project.publications.all %}
                              <li>
                                  {% if pub.link %}
                                      <a href="{{ pub.link }}" target="_blank">{{ pub.title }}</a>
                                  {% else %}
                                      {{ pub.title }}
                                  {% endif %}
                              </li>
                          {% endfor %}
                      </ul>
                  </div>
              {% endif %}
          </div>
      </div>
  {% empty %}
      <p>No projects available yet.</p>
  {% endfor %}

  {% if projects.has_next %}
      <div class="load-more"
           hx-get="{% url 'projects' %}?page={{ projects.next_page_number }}"
           hx-trigger="intersect once"
           hx-swap="beforeend"
           hx-target=".projects-grid">
      </div>
  {% endif %}
</div>
